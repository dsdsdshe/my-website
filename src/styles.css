@tailwind base;
@tailwind components;
@tailwind utilities;

/* Design tokens (CSS variables) to align site and Sphinx */
:root {
  --color-brand: 11 74 216; /* #0b4ad8 */
  --color-brand-600: 11 74 216;
  --color-brand-400: 90 163 255; /* #5aa3ff */
  --color-text: 21 21 21;
  --color-text-muted: 91 97 110;
  --color-surface: 255 255 255;
  --color-surface-elev: 255 255 255;
  --color-surface-alt: 247 247 251;
  --color-border: 229 231 235;
  --color-code-bg: 247 247 251;
  --color-code-text: 31 41 55;
  --radius: 12px;

  /* Expose Sphinx primary color variable for pydata theme */
  --pst-color-primary: rgb(var(--color-brand));
}

[data-theme="dark"] {
  --color-brand: 106 167 255; /* #6aa7ff */
  --color-brand-600: 139 184 255; /* #8bb8ff */
  --color-brand-400: 169 201 255; /* #a9c9ff */
  --color-text: 229 231 235; /* text-gray-200 */
  --color-text-muted: 167 176 192;
  --color-surface: 11 15 23; /* near-slate-900 */
  --color-surface-elev: 18 23 37;
  --color-surface-alt: 15 20 32;
  --color-border: 30 38 54;
  --color-code-bg: 16 24 38;
  --color-code-text: 209 213 219;

  --pst-color-primary: rgb(var(--color-brand));
}

@layer base {
  *, *::before, *::after { @apply box-border; }
  html, body { height: 100%; }
  body { @apply m-0 font-sans text-text bg-surface leading-relaxed; }
  a { @apply text-brand-600 hover:text-brand-400 no-underline; }
  .container { @apply max-w-content w-[92%] mx-auto; }

  pre, code, kbd, samp {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  }
  code { @apply rounded-md px-1.5 py-0.5; background-color: rgb(var(--color-code-bg)); color: rgb(var(--color-code-text)); }
  pre code { @apply block p-4 rounded-lg overflow-auto; }
}

@layer components {
  .skip-link { @apply absolute -left-[999px] -top-[999px]; }
  .skip-link:focus { @apply left-4 top-4 bg-brand text-white px-3 py-2 rounded-md; }

  .site-header { @apply sticky top-0 border-b border-border bg-surface-elev z-10 backdrop-saturate-150 backdrop-blur-sm; }
  .header-inner { @apply flex items-center justify-between gap-4 py-1; }
  .brand { @apply inline-flex items-center gap-2 text-text font-bold no-underline text-[1.05rem]; }
  .brand .logo { @apply inline-grid place-items-center w-7 h-7 rounded-lg text-white font-bold; background-image: linear-gradient(135deg, rgb(var(--color-brand-600)), rgb(var(--color-brand-400))); }
  .nav-toggle { @apply hidden bg-transparent border border-border text-text rounded-md px-2 py-1; }
  nav[aria-label="Primary"] { @apply ml-auto; }
  .nav { @apply list-none flex gap-1 p-0 m-0 items-center; }
  .nav a { @apply no-underline text-text px-2 py-1.5 rounded-md; }
  .nav a.active, .nav a[aria-current="page"] { @apply bg-surface-alt; }
  .nav a:hover, .nav a:focus { @apply bg-surface-alt; }
  .theme-toggle { @apply bg-surface-alt border border-border text-text px-2 py-1.5 rounded-md cursor-pointer; }

  main.container { @apply py-8 md:py-10; }

  .hero { @apply grid items-center gap-8 py-12 md:py-16; grid-template-columns: 1.2fr 1fr; }
  @screen md { .hero { grid-template-columns: 1.2fr 1fr; } }
  @screen sm { .hero { grid-template-columns: 1fr; } }
  .hero h1 { @apply text-[clamp(2.3rem,3.2vw+1rem,3.4rem)] leading-tight m-0 mb-3; }
  .hero p { @apply text-text-muted text-[1.05rem]; }
  .hero .cta { @apply mt-4 flex gap-3 flex-wrap; }

  .btn { @apply inline-block px-3 py-2 rounded-md no-underline font-semibold; }
  .btn.primary { @apply bg-brand text-white shadow-brand; }
  .btn.secondary { @apply bg-surface-alt text-text; }

  .cards { @apply grid gap-4 mt-8; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }
  .card { @apply border border-border rounded-[var(--radius)] p-4 bg-surface-elev; }
  .card h3 { @apply mt-0; }

  .site-footer { @apply border-t border-border bg-surface-elev; }
  .site-footer .container { @apply py-6 text-text-muted text-[0.95rem]; }

  .muted { @apply text-text-muted; }

  /* Mobile nav */
  @media (max-width: 800px) {
    .nav-toggle { @apply inline-block; }
    nav[aria-label="Primary"] { @apply absolute right-0 top-14 bg-surface-elev border border-border p-2 rounded-md mr-2; }
    nav[aria-label="Primary"] .nav { @apply flex-col items-stretch min-w-[200px]; }
    #primary-nav[data-open="false"] { display: none; }
    #primary-nav[data-open="true"] { display: block; }
  }
}

/* Sphinx alignment: keep primary color exposed */
:root { --pst-color-primary: rgb(var(--color-brand)); }
[data-theme="dark"] { --pst-color-primary: rgb(var(--color-brand)); }

/* Extras for polish */
@layer components {
  .eyebrow { @apply uppercase tracking-wider text-[0.8rem] text-text-muted font-semibold mb-2; }
  .gradient-text {
    background: linear-gradient(135deg, rgb(var(--color-brand-600)), rgb(var(--color-brand-400)));
    -webkit-background-clip: text; background-clip: text; color: transparent;
  }
  .section { @apply py-8 md:py-10; }

  .code-card { @apply border border-border rounded-xl bg-surface-elev overflow-hidden; box-shadow: 0 8px 30px rgba(0,0,0,.06); }
  .code-card-header { @apply flex items-center gap-2 px-3 py-2 border-b border-border bg-surface-alt; }
  .code-card-header .dot { @apply w-3 h-3 rounded-full inline-block; background: #ff5f56; }
  .code-card-header .dot + .dot { background: #ffbd2e; }
  .code-card-header .dot + .dot + .dot { background: #27c93f; }
  .code-card-header .title { @apply ml-2 text-sm text-text-muted; }

  /* Decorative backgrounds */
  .bg-grid { position: absolute; inset: 0; background-image: linear-gradient(to right, rgba(120,120,140,0.08) 1px, transparent 1px), linear-gradient(to bottom, rgba(120,120,140,0.08) 1px, transparent 1px); background-size: 28px 28px; }
  .bg-radial { position: absolute; inset: -10% -20%; background: radial-gradient(600px 300px at 20% 10%, rgba(11,74,216,0.18), transparent), radial-gradient(600px 300px at 80% 20%, rgba(90,163,255,0.12), transparent); filter: blur(2px); }

  .icon { @apply text-2xl; }
}
